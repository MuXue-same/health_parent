<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lxh.mapper.CheckitemMapper">
  <resultMap id="BaseResultMap" type="com.lxh.entity.CheckItem">
    <!--@mbg.generated-->
    <!--@Table t_checkitem-->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="code" jdbcType="VARCHAR" property="code" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="sex" jdbcType="CHAR" property="sex" />
    <result column="age" jdbcType="VARCHAR" property="age" />
    <result column="price" jdbcType="FLOAT" property="price" />
    <result column="type" jdbcType="CHAR" property="type" />
    <result column="attention" jdbcType="VARCHAR" property="attention" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbg.generated-->
    id, code, `name`, sex, age, price, `type`, attention, remark
  </sql>

<!--auto generated by MybatisCodeHelper on 2020-06-09-->
  <insert id="insertCheckItem">
    INSERT INTO t_checkitem(
    id,
    code,
    name,
    sex,
    age,
    price,
    type,
    remark,
    attention
    )VALUES
      (
      #{checkItem.id,jdbcType=INTEGER},
      #{checkItem.code,jdbcType=VARCHAR},
      #{checkItem.name,jdbcType=VARCHAR},
      #{checkItem.sex,jdbcType=CHAR},
      #{checkItem.age,jdbcType=VARCHAR},
      #{checkItem.price,jdbcType=FLOAT},
      #{checkItem.type,jdbcType=CHAR},
      #{checkItem.remark,jdbcType=VARCHAR},
      #{checkItem.attention,jdbcType=VARCHAR}
      )

  </insert>

<!--auto generated by MybatisCodeHelper on 2020-06-10-->
  <delete id="deleteById">
    delete from t_checkitem
    where id=#{id,jdbcType=INTEGER}
  </delete>

<!--auto generated by MybatisCodeHelper on 2020-06-10-->
  <update id="updateCheckItem">
    update t_checkitem
    set code=#{checkItem.code},name=#{checkItem.name},sex=#{checkItem.sex},
    age=#{checkItem.age},price=#{checkItem.price},type=#{checkItem.type},attention=#{checkItem.attention},remark=#{checkItem.remark}
    where id=#{checkItem.id}
  </update>

<!--auto generated by MybatisCodeHelper on 2020-06-10-->
  <select id="selectCodeAndName" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from t_checkitem
    where code=#{code} or `name`=#{name}
  </select>
    <select id="findAll" resultMap="BaseResultMap">
      select
      <include refid="Base_Column_List"/>
      from t_checkitem;
    </select>

<!--auto generated by MybatisCodeHelper on 2020-06-11-->
  <select id="findById" resultType="java.lang.Integer">
    select
    checkitem_id
    from t_checkgroup_checkitem
    where checkgroup_id=#{groupid}
  </select>


  <!--auto generated by MybatisCodeHelper on 2020-06-09-->
 <!-- <select id="selectByCodeAndName" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from t_checkitem
    <if test="value != null">
      where code = #{value} or `name` LIKE concat('%',#{value},'%')


      &lt;!&ndash; code = #{value} or &ndash;&gt;
      &lt;!&ndash;
      `name` LIKE concat('%',#{value},'%')
      where code
      LIKE &lt;!&ndash;"%"#{s}"%"&ndash;&gt;concat('%' ,#{value} ,'%') or name LIKE concat('%',#{value},'%')&ndash;&gt;
    </if>
  </select>-->
  <!--根据检查组ID查询关联的检查项-->
  <select id="findCheckItemById" parameterType="int" resultType="com.lxh.entity.CheckItem">
    select * from t_checkitem
    where id
    in (select checkitem_id from t_checkgroup_checkitem where checkgroup_id=#{id})
  </select>

</mapper>